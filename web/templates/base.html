<!DOCTYPE html>
<html lang="en" data-theme="cyberpunk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ title }}{% endblock %}</title>

    <!-- Tailwind CSS and DaisyUI -->
    <link rel="stylesheet" href="{{ url_for('static', path='styles.css') }}">

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@2.0.1"></script>
    <script src="https://unpkg.com/htmx.org@2.0.1/dist/ext/sse.js"></script>

    <!-- Custom JS -->
    <script>
        // Auto-scroll logs to bottom
        function scrollToBottom(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.scrollTop = element.scrollHeight;
            }
        }

        // Format timestamp for display
        function formatTimestamp(ts) {
            return new Date(ts).toLocaleString();
        }

        // Update heartbeat indicator
        function updateHeartbeat() {
            const heartbeat = document.getElementById('heartbeat');
            if (heartbeat) {
                heartbeat.classList.add('heartbeat-pulse');
                setTimeout(() => heartbeat.classList.remove('heartbeat-pulse'), 2000);
            }
        }
    </script>
</head>
<body class="min-h-screen bg-gradient-to-br from-base-300 to-base-100">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <header class="mb-6">
            <div class="flex items-center justify-between cyberpunk-card rounded-lg p-4">
                <div class="flex items-center space-x-4">
                    <h1 class="text-2xl font-bold cyberpunk-text">{{ title }}</h1>
                    <div id="heartbeat" class="w-3 h-3 bg-success rounded-full"></div>
                    <span id="last-decision-id" class="text-sm opacity-70">Decision ID: -</span>
                </div>
                <div class="text-sm opacity-70">
                    <span id="current-time">{{ current_time }}</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main>
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- Update time every second -->
    <script>
        setInterval(() => {
            const now = new Date();
            document.getElementById('current-time').textContent =
                now.toISOString().replace('T', ' ').slice(0, 19) + ' UTC';
        }, 1000);
    </script>
</body>
</html>
